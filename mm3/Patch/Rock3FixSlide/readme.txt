ロックマン３のスライディング調整パッチ

・配布元ウェブサイト
　　　　　http://borokobo.web.fc2.com/
　　　　　（Neoぼろくず工房）
　　　　　http://www4.atpages.jp/borokobo/
　　　　　（Neoぼろくず工房別館）

●概容
　ロックマン３のスライディングは、４・５と比べて微妙に感覚が異なります。

（１）下を押し続けてもスライディングジャンプできてしまう
（２）滑走距離が短い
（３）スライディング開始からしばらく(8フレーム程)スライディングジャンプできない

　好みの問題もあるかもしれませんが、
　（１）は後のシリーズでは見られない操作方法です。
　（２）は説明不要でしょうか。
　（３）はあまり知られていないと思います。たぶんｗ
　ですが、実は体感している人が多いはずです。
　・タップステージでメットールとライフ回復大の部屋のトゲ
　・ジェミニステージの水地帯
　・スパークステージの２対のエレクトリックガビョールの間の穴
　あたりには、短距離スライディングジャンプしようとして出来ずに転落した
　ロックマンの亡霊が大量に居ついていると思います。
　後ろの二つは処理オチが酷い場面で、
　スライディングジャンプ不能時間も２倍近くになるので
　特に失敗しやすい場面です。

　（１）〜（３）をとりあえずパッチでどうにかしよーぜという企画です。

●使用法
　適当なパッチソフトで当ててください。

●不具合・補足など
・基本的にロクにテストしていないのでバグるかもしれません。
・本当は（１）と（３）だけを合わせて修正する予定でした。
　この２つは本質が異なる現象であるのですが、
　ただ、（３）の処理を外すと必然的に６バイトほどスペースが空き
　そのスペースで（１）の処理がかけると踏んだのです……が。
　（１）の処理はなかなか大変で
　結局あちこち弄り回すことになってしまいました。
・「（３）の処理を外すと」という表現からも分かりますが、
　元々はわざとしばらくスライディングジャンプできなくしてあります。
　一応、この処理だけを外してしまうと、
　スライディングし始めたフレームにジャンプしてしまうので、
　それを防止する為にしばらくジャンプできない仕様にしてあるかとも思ったのですが、
　それなら、最初の１フレームだけジャンプ禁止にすれば良いような……
・（２）はこのパッチに含めるのをやめ
　パッチを分けて公開しようとも思ったのですが、
　実はこの処理のために（３）に関係する場所も同時に書き換える必要があるため、
　まとめてしまいました。
・（３）がどうしても気になり調査を開始したのですが、
　当初は、ラグ中はパッド処理がおかしくなることが原因だと思っていました。
　でも全然違う原因だった……というか仕様だったという……
・（１）〜（３）を部分的に解消したい方は
　以下のソースを見て調整するか、ご相談ください。

●ソース
BANKORG_D .macro
	.bank (\1>>16)
	.org (\1&$FFFF)
	.endm

	;ロングスライド
	BANKORG_D $1ED3A9+1
	.db $1A

	;ちょっと余分な処理を削りスペースを確保するため、
	;少し先に分岐する
	BANKORG_D $1ED3FE
	bcc $D455

	;スライディングタイマーの処理の代わりに
	;下押しを確認する
	BANKORG_D $1ED42D
	lda <$16 ;PadHold1P[ABETUDLR
	and #$04
	bne $D439

	;立ち上がり確定時に下押しを確認する
	BANKORG_D $1ED445
	sta <$30 ;ロックマンの状態
	lda <$16 ;PadHold1P[ABETUDLR
	and #$04
	bne $D459
	lda <$14 ;PadPush1P[ABETUDLR
	bmi $D46D
	bpl $D459
