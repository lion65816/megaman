print("●ナパームマンステージの岩壁\n")
print("(利用方法)範囲選択後[0]:自動補正実行\n")
print("・黄色の岩壁を自動補正する。\n・判定が壁であるタイルと連続していると判定される。\n・よく見分けがつかないタイルばかりだが微妙に異なっており、正しい意図で置くことが難しそう。\n")

require("lua/common")


local tTGDest = --対象
{
[0x26]=1,[0x27]=1,[0x28]=1,[0x29]=1,[0x2E]=1,[0x2F]=1,[0x30]=1,[0x31]=1,[0x38]=1,[0x39]=1,[0x3A]=1,[0x41]=1,[0x42]=1,[0x43]=1,[0x46]=1,[0x47]=1,[0x48]=1,[0x49]=1,[0x4A]=1,[0x4B]=1,[0x4C]=1,[0x4D]=1,
}
local tTSurface =
{
0x3A,0x48,0x26,0x26,0x38,0x26,0x26,0x26,0x4C,0x4C,0x26,0x26,0x4C,0x38,0x26,0x38,
}

function pEdit()
	local iRV=0
	local x0,y0,x1,y1 = getselectedrect()
	
	if iskeypressed(string.byte("0")) then --{
		iRV = 1
		CorrectSurface(tTGDest,tTSurface,true)
		CorrectCyclicTile({[0x26]=1},{0x2E,0x2F,0x26,0x27,},1,2,2,2)
		CorrectCyclicTile({[0x4C]=1},{0x4A,0x4B,0x4C,0x4D,},1,2,2,2)
		CorrectCyclicTile({[0x3A]=1},{0x30,0x31,0x3A,0x41,},1,2,2,2)
		CorrectCyclicTile({[0x38]=1},{0x28,0x29,0x38,0x39,},1,2,2,2)
		CorrectCyclicTile({[0x48]=1},{0x47,0x49,0x48,0x46,},1,2,2,2)
--		CorrectCyclicTile({[]=1},{},1,2,2,2)
		updateundo()
	end --}

	return iRV
end --function
