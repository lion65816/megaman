print("●スカルマンステージの岩壁\n")
print("(利用方法)範囲選択後[0]:自動補正実行\n")
print("・紫色の岩壁を自動補正する。\n・岩壁タイル同士で連続していると判定される。\n・場所によってはかなり見栄えがおかしくなるので要調整\n")

require("lua/common")


local tTGDest = --対象
{
[0x60]=1,[0x61]=1,[0x62]=1,[0x63]=1,[0x64]=1,[0x65]=1,[0x66]=1,[0x67]=1,[0x68]=1,[0x69]=1,[0x6A]=1,[0x6B]=1,[0x6C]=1,[0x6D]=1,[0x6E]=1,[0x6F]=1,
}
local tTSurface =
{
0x66,0x67,0x60,0x60,0x62,0x64,0x65,0x60,0x6E,0x6F,0x60,0x60,0x6A,0x00,0x00,0x00,
}

function pEdit()
	local iRV=0
	local x0,y0,x1,y1 = getselectedrect()
	
	if iskeypressed(string.byte("0")) then --{
		iRV = 1
		CorrectSurface(tTGDest,tTSurface,true)
		CorrectCyclicTile({[0x60]=1},{0x60,0x61,0x68,0x69,},1,2,2,2)
		CorrectCyclicTile({[0x62]=1},{0x62,0x63,0x63,0x62,},1,2,2,2)
		CorrectCyclicTile({[0x6A]=1},{0x6B,0x6A,0x6A,0x6B,},1,2,2,2)
		CorrectCyclicTile({[0x64]=1},{0x6C,0x64,0x64,0x6C,},1,2,2,2)
		CorrectCyclicTile({[0x65]=1},{0x65,0x6D,0x6D,0x65,},1,2,2,2)
--		CorrectCyclicTile({[]=1},{},1,2,2,2)
--		CorrectCyclicTile({[]=1},{},1,2,2,2)

		updateundo()
	end --}

	return iRV
end --function
