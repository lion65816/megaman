ロックマン2 ピピバグ修正パッチ version 0.01

・配布元ウェブサイト
　　　　　http://borokobo.web.fc2.com/
　　　　　（Neoぼろくず工房）
　　　　　http://www4.atpages.jp/borokobo/
　　　　　（Neoぼろくず工房別館）

●概容
　ロックマン2の鳥の敵「ピピ」には少しプレイすればわかるバグがあります。
　有名なのは、「卵の殻が割れてから最初に出現した物」が、
　ピピが画面外に出ると同時に消えてしまう問題です。
　これで、目の前の1UPを消して悔しい思いをした方は多いでしょう。
　さらに、うまく調整すると、画面の先に出現する敵(マタサブロウで頻発)を
　消すことも出来てしまいます。

　あまり有名でないバグとして、アイテム2号による加速を利用して、
　うまく卵だけを画面外に出すと、　次に出現する敵をピピが抱えて動くという面白い現象も起きます。

　これらの問題を解決するパッチです。

●使用法
　ipsパッチ
Rock2FixPipi001.ips
　を適当なソフトで当ててください。

●補足
・基本的にロクにテストしていないのでバグるかもしれません。
・未使用領域を利用しているので、同じく未使用領域を利用した
　他のパッチと併せて利用することができません。
・直し方は、ピピが卵に手を出す(抱えて移動させる/消す)時に、
　「それ」が本当に卵かどうかを確認する処理を追加するという方法を取っています。

●ソース・再配布など
	;ピピが卵を動かす処理
	BANKORG_D $1DAC37
	jmp Pipi_Sub1

	;ピピが画面外に出るときや倒された時に卵を消す処理
	BANKORG_D $1DAC85
Pipi_Tmp:
	jsr Pipi_Sub2
	bne .NotDelete
	sta $0430,y ;Flag+10
.NotDelete
	rts
	;(ここもrts)

	BANKORG_D $1FF2B0
Pipi_Sub1:
	jsr Pipi_Sub2
	bne .NotMoveEgg
	jmp $AC3B
.NotMoveEgg
	jmp $AC74

;ゼロなら卵が存在、非ゼロなら卵は消失済み
Pipi_Sub2:
	ldy $0110,x
	dey
	lda $0430,y ;Flag+10
	bpl .Empty
	lda $0410,y ;Type+10
	cmp #$3A
	rts
.Empty
	;非ゼロならなんでもいい
	txa
	rts

　ご自由にお使いください。
　再配布、再改造などもご自由に。改造への組み込みもご自由に。
　ドキュメントにその旨を書いていただけると私が大喜びします。
